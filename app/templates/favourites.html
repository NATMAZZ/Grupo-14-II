{% extends 'header.html' %} {% block content %}
{% block body_class %}{% endblock %}


<div class="container-xl">
    <div class="table-responsive">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-8">
                        <h2><strong> Tus vecinos favoritos de Springfield están acá: </strong></h2>
                    </div>
                </div>
            </div>
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" 
                         style="margin-bottom: 20px; padding: 15px; border-radius: 5px; 
                                background-color: {% if message.tags == 'success' %}#d4edda{% else %}#fff3cd{% endif %};
                                color: {% if message.tags == 'success' %}#155724{% else %}#856404{% endif %};">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            {% load static %}

            {% if favourite_list|length == 0 %}
              <div class="empty-favs container py-4">
                <div class="row align-items-center justify-content-center g-4">

                <!-- Columna imagen -->
                <div class="col-12 col-md-4 text-center">
                    <img src="{% static 'imagenes/apu-limpieza.png' %}"
                        alt="Apu barriendo"
                        class="img-fluid"
                        style="max-width:200px;">
                </div>

                <!-- Columna texto -->
                <div class="col-12 col-md-6 text-center text-md-start">
                    <h4 class="mb-2">No tenés ninguno guardado aún</h4>
                    <p class="text-muted mb-3">¡Agregá algunos desde la guía!</p>

                    <a href="{% url 'home' %}" class="btn btn-warning">
                    Ir a la guía de personajes
                    </a>
                </div>

                </div>
            </div>

            {% else %}
            <table class="table table-striped table-hover align-middle w-100">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Género <i class="fa fa-sort"></i></th>
                        <th>Estado</th>
                        <th>Ocupación <i class="fa fa-sort"></i></th>
                        <th>Eliminar de favoritos </th>
                    </tr>
                </thead>
                <tbody>
                    {% for favourite in favourite_list %}
                    <tr>
                        <td>-</td>
                        <td><img src="{{ favourite.image }}" alt="" style="max-width: 120px; max-height: 120px;"></td>
                        <td>{{ favourite.name }}</td>
                        <td>{{ favourite.gender }}</td>
                        <td>{{ favourite.status }}</td>
                        <td>{{ favourite.occupation }}</td>
                        <td>
                            <form method="post" action="{% url 'borrar-favorito' %}">
                                {% csrf_token %}
                                <input type="hidden" name="id" value="{{ favourite.id }}">
                                <button type="submit" class="btn" style="color:red"><i class="material-icons">&#xE872;</i></button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}